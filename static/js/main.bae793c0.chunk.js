(this["webpackJsonpevapharma-task"]=this["webpackJsonpevapharma-task"]||[]).push([[0],{248:function(e,t,n){},249:function(e,t,n){},522:function(e,t,n){},523:function(e,t,n){"use strict";n.r(t);var a=n(9),o=n.n(a),i=n(162),c=n.n(i),r=(n(248),n(29)),s=(n(249),n(53)),l=n(163),d=n(69),u=n(70),h=n(73),j=n(72),p=n(50),b=n.n(p),m=n(10),g="https://taskapi2021.azurewebsites.net/api/",O=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={controles:{email:"",password:""}},e.inputChangeHandler=function(t,n){var a=Object(l.a)(Object(l.a)({},e.state.controles),{},Object(s.a)({},n,t.target.value));e.setState({controles:a})},e.login=function(){var t=e.state.controles.email,n=e.state.controles.password;b.a.post(g+"user/login",{Email:t,Password:n},{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}}).then((function(t){localStorage.setItem("TOKEN","Bearer ".concat(t.data.token)),e.props.history.push("countries")})).catch((function(e){return alert("Email or password is not correct. If you don't have an account please sign up")}))},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{className:"login-box",children:[Object(m.jsxs)("div",{className:"form-group row",children:[Object(m.jsx)("label",{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Email"}),Object(m.jsx)("div",{className:"col-sm-10",children:Object(m.jsx)("input",{type:"text",className:"form-control",id:"staticEmail",placeholder:"email@example.com",onChange:function(t){return e.inputChangeHandler(t,"email")}})})]}),Object(m.jsxs)("div",{className:"form-group row",children:[Object(m.jsx)("label",{htmlFor:"inputPassword",className:"col-sm-2 col-form-label",children:"Password"}),Object(m.jsx)("div",{className:"col-sm-10",children:Object(m.jsx)("input",{type:"password",className:"form-control",id:"inputPassword",placeholder:"Password",onChange:function(t){return e.inputChangeHandler(t,"password")}})})]}),Object(m.jsx)("button",{className:"btn btn-success",onClick:this.login,children:"Login"})]})}}]),n}(a.Component),w=n(71),f=n(40),x=n.n(f),C=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).indexTemplate=function(e){return Object(m.jsx)("div",{id:"indicator",children:e.rowIndex+1})},e}return Object(u.a)(n,[{key:"render",value:function(){var e,t=this;return Object(m.jsxs)(x.a,(e={elementAttr:{id:"gridContainer"},dataSource:this.props.data,showBorders:!1,showColumnLines:!1,showRowLines:!1,allowColumnReordering:!0,allowColumnResizing:!0,columnResizingMode:"widget",rowAlternationEnabled:!0,loadPanel:{enabled:!0,showIndicator:!0,showPane:!0},rowDragging:{allowColumnReordering:!0,showDragIcons:!0}},Object(s.a)(e,"showRowLines",!0),Object(s.a)(e,"onRowClick",(function(e){return t.props.onRowClicked(e)})),Object(s.a)(e,"onRowInserted",(function(e){return t.props.onRowInserted(e)})),Object(s.a)(e,"onRowUpdated",(function(e){return t.props.onEdit(e)})),Object(s.a)(e,"onRowRemoved",(function(e){return t.props.onDelete(e)})),Object(s.a)(e,"children",[Object(m.jsx)(f.Column,{fixed:!0,dataField:"",cellRender:this.indexTemplate,width:60,allowEditing:!1}),Object(m.jsx)(f.Column,{fixed:!0,dataField:"id",allowEditing:!1}),Object(m.jsx)(f.Column,{fixed:!0,dataField:"name"}),Object(m.jsx)(f.SearchPanel,{visible:!0,width:240,placeholder:"Search..."}),Object(m.jsx)(f.ColumnFixing,{enabled:!0}),Object(m.jsx)(f.Selection,{mode:"single"}),Object(m.jsx)(f.Grouping,{autoExpandAll:!0}),Object(m.jsx)(f.Scrolling,{columnRenderingMode:"virtual"}),Object(m.jsx)(f.Editing,{mode:"row",allowUpdating:!0,allowDeleting:!0,allowAdding:!0}),Object(m.jsx)(f.Scrolling,{columnRenderingMode:"virtual"}),Object(m.jsx)(f.Paging,{defaultPageSize:10}),Object(m.jsx)(f.Pager,{showPageSizeSelector:!0,allowedPageSizes:[5,10,20,100],showInfo:!0})]),e))}}]),n}(a.Component),v=localStorage.getItem("TOKEN"),y="https://taskapi2021.azurewebsites.net/api/",R=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={data:[]},e.componentDidMount=function(){e.getAllCountries()},e.getAllCountries=function(){b.a.get(y+"country",{headers:{authorization:localStorage.getItem("TOKEN")}}).then((function(t){e.setState({data:t.data})})).catch((function(t){return e.props.history.push("/")}))},e.onRowClicked=function(t){e.props.history.push("countries/".concat(t.data.id))},e.onRowInserted=function(t){b.a.post(y+"country",{Name:t.data.name},{headers:{authorization:v}}).then((function(t){e.getAllCountries()}))},e.onEdit=function(e){b.a.put(y+"country",e.data,{headers:{authorization:v}})},e.onDelete=function(e){b.a.delete(y+"country/"+e.data.id,{headers:{authorization:v}})},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"text-center head",children:[Object(m.jsx)("h3",{className:"title",children:"Coutries"}),Object(m.jsx)(w.b,{to:"/",className:"logout",children:"Logout"})]}),Object(m.jsx)(C,{data:this.state.data,onEdit:this.onEdit,onDelete:this.onDelete,onRowInserted:this.onRowInserted,onRowClicked:this.onRowClicked})]})}}]),n}(a.Component),N=localStorage.getItem("TOKEN"),I="https://taskapi2021.azurewebsites.net/api/",k=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={data:[]},e.componentDidMount=function(){e.getAllCitiesForSelectedCountry()},e.getAllCitiesForSelectedCountry=function(){var t=e.props.match.params.id;b.a.get(I+"city/getcities/"+t,{headers:{authorization:localStorage.getItem("TOKEN")}}).then((function(t){e.setState({data:t.data})})).catch((function(t){return e.props.history.push("/")}))},e.onRowInserted=function(t){var n=e.props.match.params.id;b.a.post(I+"city",{Name:t.data.name,CountryId:parseInt(n)},{headers:{authorization:N}}).then((function(t){e.getAllCitiesForSelectedCountry()}))},e.onDelete=function(e){b.a.delete(I+"city/"+e.data.id,{headers:{authorization:N}})},e.onEdit=function(e){b.a.put(I+"city",{Id:e.data.id,Name:e.data.name,CountryId:e.data.countryId},{headers:{authorization:N}})},e.onRowClicked=function(e){console.log(e)},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"text-center head",children:[Object(m.jsx)(w.b,{to:"/countries",className:"back",children:"Back to Countries"}),Object(m.jsx)("h3",{className:"title",children:"Cities"}),Object(m.jsx)(w.b,{to:"/",className:"logout",children:"Logout"})]}),Object(m.jsx)(C,{data:this.state.data,onEdit:this.onEdit,onDelete:this.onDelete,onRowInserted:this.onRowInserted,onRowClicked:this.onRowClicked})]})})}}]),n}(a.Component);var E=function(){return Object(m.jsx)("div",{className:"App container",children:Object(m.jsxs)(r.c,{children:[Object(m.jsx)(r.a,{exact:!0,path:"/",component:O}),Object(m.jsx)(r.a,{exact:!0,path:"/countries",component:R}),Object(m.jsx)(r.a,{exact:!0,path:"/countries/:id",component:k})]})})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,524)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),o(e),i(e),c(e)}))};n(241),n(518),n(519),n(520),n(521),n(522);c.a.render(Object(m.jsx)(o.a.Fragment,{children:Object(m.jsx)(w.a,{children:Object(m.jsx)(E,{})})}),document.getElementById("root")),S()}},[[523,1,2]]]);
//# sourceMappingURL=main.bae793c0.chunk.js.map